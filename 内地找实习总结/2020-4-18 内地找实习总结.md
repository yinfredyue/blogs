## 内地找实习总结

结果上，是失败的：

smartX 分布式存储工程师：一面挂

腾讯 后端开发：一面挂

头条 抖音后端：简历挂

阿里 C/C++工程师：三面挂

微软苏州 SWE：二面挂

亚马逊 SWE：简历挂

谷歌中国 SWE：简历挂。



时间线

谷歌投递，smartX，腾讯，头条，微软，亚马逊投递，smartX一面，腾讯一面，阿里笔试，阿里一面，阿里二面，微软一面，阿里三面，微软二面。



### 过程

12月底投递谷歌（内推），12月底-1月中都在刷Leetcode。一月中得知谷歌简历挂。一月中到二月中在交换学校作业太多，都没有准备面试。二月底投递简历，面试SmartX和腾讯（三月上旬）之前基本没有准备。这个时候从帮忙内推阿里的学长那里得知，学习MIT 6.824对阿里实习有帮助。

春假开始，主要精力放在MIT6.824上，花了两周时间做完Lab2和Lab3A，投递阿里。之后等待阿里面试的时候，按照腾讯的面试风格，试图弥补数据库和C++的面试知识。

阿里笔试只AC 20%，依然收到一面。一面算法题接近作弊*的方式做出来（主管应该是给我免了一面，前两次面试都是他一个人。以下依然把喜德面称为二面）。三面之前和内推的学长讨论，决定放弃弥补数据库，巩固算法和计算机网络。实际上因为担心计算机网络没有学完，两天时间都在恶补计算机网络，基本没有准备算法。阿里三面，自我感觉算法题做的挺不错，项目也聊的很好，但是概率题没有做出来，最后还是没有通过。微软一面项目聊的不错，但是算法题做的不好，本来觉得会挂，但还是出乎意料接到二面。微软二面算法题还是做的不好，面试官明确表示不能通过。

*：接到面试前十分钟刚做到非常相似的题，窗口都没关。

### 面试题目

- SmartX

    - Raft
        - 服务器可能存在的三种状态，如何转换？
        - follower->candidate的时候，投票给自己是必须的吗？
        - Raft如何应对network partition?
        - 读的操作必须经过log吗，是否有更高效方法？当时论文最后还没看完，不懂。
    - OS
        - 当调用`open`打开文件时，操作系统中的操作？
        - 进程，线程，协程的区别？
        - 进程间通讯的方式？要通讯的信息很大？需要shared memory。完全不懂。
        - Lock-free data strcture？828上听说过，但是完全没学过。

    OS一脸懵逼，面试官人很好，但是面完说“我觉得港大应该还是很好的学校”，当时真的觉得很丢脸很惭愧。

- 腾讯一面

    紧接着SmartX第二天。

    面的很多关于C++的问题，后来才知道在GeekForGeeks上的C++ FAQ里面都有... 问的数据库真的懂得不多。

面完以上两家之后很惊讶，因为从来不知道面试会是这个样子。面试之前觉得自己学过CSAPP，看过C++ primer，OSTEP，算法也还可以，没想到会是这样的结果。当时打算恶补数据库和C++，现在看来，这个决定是错误的。SmartX初创公司，而且分布式是其主要方向，对底层的要求必然很高。听后来给内推阿里的学长说，腾讯的这种面试方法，需要针对性准备。内地有专门针对这种面试的资料，会背就会，不会背就不会。这两次面试的风格算是很极端的，但是当时并不知道，面完之后花了好几天的时间尝试弥补C++和数据库，结果对之后的面试没有起到任何帮助。



- 阿里一面

    - 智力题

        一些不难的智力题，基本想想就能出答案

    - 口头算法题

        - 一堆(x, y) 坐标，假设所有点的x和y都不相同，找出最大斜率。

            刚开始没有思路，想到按x排序但是看不出有什么帮助。后来面试官提示观察相邻的三个点。观察到最大斜率必然通过中间那个点。

        - 有序数组

            - 假设有一个数字出现至少一半以上，如何找出？

                Leetcode做过，看中间位置

            - 假如不确定有没有这样的数字存在，如何找出？

                从中间向两端扩散遍历，依然是O(N)。

                使用binarySearch遍历，O(logN)。

    - 代码算法题

        Leetcode中有非常相似的[题目](https://leetcode.com/problems/search-in-rotated-sorted-array/)。

        

- 阿里二面

    问了一下Raft，很简短就过了。虎神应该是想要招我的，没有卡我。



- 微软一面

    先说了一下MallocLab。然后做题。

    - 找到LinkedList中倒数第k个节点。

        一开始五分钟就写完了，也考虑到了链表参数为null或者太短的情况，但是没有考虑到k < 0的情况。花了很长时间把代码改乱了，最后还是改了回来。但是微软面试官很重视代码风格，比如说链表为Null或者k < 0的情况，都要求explicitly写在函数的开头，而不希望代码implicitly处理这些情况。

    - 找出一个数字的二进制表示中，1的个数。

        对于非负数很简单。后来面试官问我对于负数怎么处理，时间来不及了，让我有兴趣去了解一下。



- 阿里三面

    - 算法题：复制一个可能有环的链表

        做的比较顺利，使用unordered_map。

    - 概率题：

        有一个在单机上算需要1s的任务，随机分成三份，在3台机器上算，问可以在半秒完成的概率。最后的思路是算1分成3份，最大份超过0.5的概率。但是没有算出来。

    - 项目

        说了一下做的Raft。

    我认为是因为概率题没有做出来挂了。可以说是离offer最近的一次了，很可惜。

    

- 微软二面

    - 网络

        问了一下网络分层模型，问了udp和tcp的区别。问什么情况下用udp？有没有可能结合udp和tcp的优点，设计一个相对可靠又相对高效的协议？我说tcp中要等buffer全部接受才flush给应用，如果可以牺牲可靠性，可以等buffer中80%接受就flush给应用。

    - 问我平时代码风格怎么样，让我把github上挑一个文件给他看。问我喜欢oop还是函数式。

    - 算法题：

        服务器有一个很大的树，要求每一次用户请求的时候返回一个节点，preorder。

        和[这题](https://leetcode.com/problems/binary-tree-preorder-traversal/)的iterative solution很相像，但是我没做出来。



## 教训

开始面试之前没有了解足够的信息，很迟才知道牛客网上有面经。

基础知识方面：网络+OS+数据库+算法。

算法还是不够强。准备的方式不够系统，三月份做题的时候没有规划，都是随便挑题目做，如果有按topic准备，肯定会准备到tree的iteratve traversal，我其实也知道自己这个topic不是很熟练。很可惜。下一次准备的时候要按topic准备，一定要制定计划！

数据库确实是一个软肋。但是想通过抱佛脚的方式补不切实际，也不明智。扬长避短才是正确的方法。接下来如果有时间可以去做cmu的数据库公开课，但是不是很有必要。很多时候对数据库的要求不是很高，这次的所有面试中也只有腾讯问到了数据库。

OS的知识，OSTEP其实可以应对大部分面试，但是肯定不够应付SmartX这样的硬核公司。

网络目前看来问的不多。UW-madison的课应该是够深入的，微软的时候也回答到了。

总结来看，算法依然是最重要的。其他三个方面如果提前开始**制定计划**准备，应该是没有问题的。算法要长期的准备，保持手感和思维。

字节简历挂的原因看来是因为没有把简历中的经历复制出来填进去，血的教训。



准备中的总结资料也附上了，对下一次应该是很有用的。一句话：提早准备，制定计划。